{% extends "base.html" %}

{% block title %}
DHT11
{% endblock %}

{% block headline %}
Temperature & Humidity
{% endblock %}

{% block content %}
<h2>Daily</h2>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
{% for day in daily %}
<canvas id="dailyChart{{loop.index0}}"></canvas>
<script>
  var graphScales = {
    yAxes: [{
      ticks: {
        stepSize: 1,
        callback: function(value, index, values){
          return  value +  '{{day.unit}}'
        }
      }
    }]
  };
  var ctx = document.getElementById("dailyChart{{loop.index0}}");
  var graphData = {
    labels: [
    {% autoescape false %}
      {% for item in day.labels %}
        '{{item}}',
      {% endfor %}
    {% endautoescape %}
    ],
    datasets: [
      {% for data_list in day.data %}
      {
        label: '{{day.places[loop.index0]}}',
        {% autoescape false %}
        data: {{ data_list }},
        {% endautoescape %}
        tension: 0.3,
        pointRadius: 0,
        {% if day.colors|length > loop.index0 + 1 %}
        borderColor: "{{day.colors[loop.index0]}}",
        {% else %}
        borderColor: "rgba(0,0,0,1)",
        {% endif %}
        backgroundColor: "rgba(0,0,0,0)"
      },
      {% endfor %}
    ],
  };
  var graphOptions = {
    title: {
      display: true,
      text: '{{day.graphTitle}}({{day.labels[0]}}～{{day.labels[-1]}})'
    },
    scales: graphScales,
  };
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: graphData,
    options: graphOptions
  });
</script>
{% endfor %}

<h2>Weekly</h2>
<canvas id="temperatureWeeklyChart"></canvas>
<script>
  var temperatureScales = {
    yAxes: [{
      ticks: {
        stepSize: 1,
        callback: function(value, index, values){
          return  value +  '℃'
        }
      }
    }]
  };
  var humidityScales = {
    yAxes: [{
      ticks: {
        stepSize: 1,
        callback: function(value, index, values){
          return  value +  '%'
        }
      }
    }]
  };
  var ctx = document.getElementById("temperatureWeeklyChart");
  var weeklyTemperatureData = {
    labels: [
    {% autoescape false %}
      {% for item in label_weekly %}
        '{{item}}',
      {% endfor %}
    {% endautoescape %}
    ],
    datasets: [
      {% for temperature_list in temperature_weekly %}
      {
        label: '{{place_weekly[loop.index0]}}',
        {% autoescape false %}
        data: {{ temperature_list }},
        {% endautoescape %}
        tension: 0.3,
        pointRadius: 0,
        {% if temperature_color|length > loop.index0 + 1 %}
        borderColor: "{{temperature_color[loop.index0]}}",
        {% else %}
        borderColor: "rgba(255,0,0,1)",
        {% endif %}
        backgroundColor: "rgba(0,0,0,0)"
      },
      {% endfor %}
    ],
  };
  var weeklyTemperatureOptions = {
    title: {
      display: true,
      text: '気温({{label_weekly[0]}}～{{label_weekly[-1]}})'
    },
    scales: temperatureScales,
  };
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: weeklyTemperatureData, 
    options: weeklyTemperatureOptions
  });
</script>

<canvas id="humidityWeeklyChart"></canvas>
<script>
  var ctx = document.getElementById("humidityWeeklyChart");
  var weeklyHumidityData = {
    labels: [
    {% autoescape false %}
      {% for item in label_weekly %}
        '{{item}}',
      {% endfor %}
    {% endautoescape %}
    ],
    datasets: [
    {% for humidity_list in humidity_weekly %}
      {
        label: '{{place_weekly[loop.index0]}}',
        {% autoescape false %}
        data: {{humidity_list}},
        {% endautoescape %}
        tension: 0.3,
        pointRadius: 0,
        {% if humidity_color|length > loop.index0 + 1 %}
        borderColor: "{{humidity_color[loop.index0]}}",
        {% else %}
        borderColor: "rgba(0,0,255,1)",
        {% endif %}
        backgroundColor: "rgba(0,0,0,0)"
      },
      {% endfor %}
    ],
  };
  var weeklyHumidityOptions = {
    title: {
      display: true,
      text: '湿度({{label_weekly[0]}}～{{label_weekly[-1]}})'
    },
    scales: humidityScales,
  };
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: weeklyHumidityData,
    options: weeklyHumidityOptions
  });
</script>

<h2>Monthly</h2>
<canvas id="temperatureMonthlyChart"></canvas>
<script>
  var ctx = document.getElementById("temperatureMonthlyChart");
  var monthlyTemperatureData = {
    labels: [
    {% autoescape false %}
      {% for item in label_monthly %}
        '{{item}}',
      {% endfor %}
    {% endautoescape %}
    ],
    datasets: [
      {% for temperature_list in temperature_monthly %}
      {
        label: '{{place_monthly[loop.index0]}}',
        {% autoescape false %}
        data: {{ temperature_list }},
        {% endautoescape %}
        tension: 0.3,
        pointRadius: 0,
        {% if temperature_color|length > loop.index0 + 1 %}
        borderColor: "{{temperature_color[loop.index0]}}",
        {% else %}
        borderColor: "rgba(255,0,0,1)",
        {% endif %}
        backgroundColor: "rgba(0,0,0,0)"
      },
      {% endfor %}
    ],
  };
  var monthlyTemperatureOptions = {
    title: {
      display: true,
      text: '気温({{label_monthly[0]}}～{{label_monthly[-1]}})'
    },
    scales: temperatureScales,
  };
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: monthlyTemperatureData,
    options: monthlyTemperatureOptions
  });
</script>

<canvas id="humidityMonthlyChart"></canvas>
<script>
  var ctx = document.getElementById("humidityMonthlyChart");
  var monthlyHumidityData = {
    labels: [
    {% autoescape false %}
      {% for item in label_monthly %}
        '{{item}}',
      {% endfor %}
    {% endautoescape %}
    ],
    datasets: [
      {% for humidity_list in humidity_monthly %}
      {
        label: '{{place_monthly[loop.index0]}}',
        {% autoescape false %}
        data: {{humidity_list}},
        {% endautoescape %}
        tension: 0.3,
        pointRadius: 0,
        {% if humidity_color|length > loop.index0 + 1 %}
        borderColor: "{{humidity_color[loop.index0]}}",
        {% else %}
        borderColor: "rgba(0,0,255,1)",
        {% endif %}
        backgroundColor: "rgba(0,0,0,0)"
      },
      {% endfor %}
    ],
  };
  var monthlyHumidityOptions = {
    title: {
      display: true,
      text: '湿度({{label_monthly[0]}}～{{label_monthly[-1]}})'
    },
    scales: humidityScales,
  };
  var myLineChart = new Chart(ctx, {
    type: 'line',
    data: monthlyHumidityData,
    options: monthlyHumidityOptions
  });
</script>

<h2>Yealy</h2>

{% endblock %}
